{"filter":false,"title":"report.html","tooltip":"/client/report.html","undoManager":{"mark":90,"position":90,"stack":[[{"start":{"row":0,"column":0},"end":{"row":519,"column":0},"action":"insert","lines":["<!doctype html>","<html lang=\"en\" ng-app>","  <head>","    <title>BẦU CUA ONLINE</title>","    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">","    <!-- Latest compiled and minified CSS -->","    <link rel=\"stylesheet\" href=\"https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css\">","    <link rel=\"stylesheet\" href=\"https://www.w3schools.com/w3css/4/w3.css\">","","    <!-- jQuery library -->","    <script src=\"https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js\"></script>","","    <!-- Latest compiled JavaScript -->","    <script src=\"https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js\"></script>","    ","    <!--angular-->","    <script src=\"/js/angular.min.js\"></script>","    ","    <!--socket-->","    <script src=\"/socket.io/socket.io.js\"></script>","   ","    ","    <style>","      /* Remove the navbar's default margin-bottom and rounded borders */ ","      .navbar {","        margin-bottom: 0;","        border-radius: 0;","      }","      ","      /* Set height of the grid so .sidenav can be 100% (adjust as needed) */","      .row.content {height: 1000px;}","      ","      /* Set gray background color and 100% height */","      .sidenav {","        padding-top: 20px;","        background-color: #f1f1f1;","        height: 100%;","      }","      ","      /*list message*/","      .list_message {","        white-space: nowrap;","        overflow-x: hidden;","        overflow-y: visible;","        height: 100px;","      }","      ","      /*table online*/","      .table.online {","        white-space: nowrap;","        overflow-x: hidden;","        overflow-y: visible;","        height: 80px;","      }","      ","      /* Set black background color, white text and some padding */","      footer {","        background-color: #555;","        color: white;","        padding: 15px;","      }","      a {","        color: #aaddff;","      }","      ","      /* On small screens, set height to 'auto' for sidenav and grid */","      @media screen and (max-width: 767px) {","        .sidenav {","          height: auto;","          padding: 15px;","        }","        .row.content {height:auto;} ","      }","      ","      /* Effect when hover in banbaucua*/","      .img-thumbnail.banbaucua:hover  {","        opacity: 0.4;","      }","      ","      .middle:active{","        opacity: 1;","      }","    </style>","    ","    <script>","      function ChatController($scope, $timeout) {","        var socket = io.connect();","","        //init","        $scope.messages = [];","        $scope.roster = [];","        $scope.users_info = []; //contains all users in game","        $scope.name = \"\";       //name of user","        $scope.coins = 10;      //current money","        $scope.text = '';","        $scope.openGame = false;","        $scope.time = 0;        //time of game","        $scope.bets = [0,0,0,0,0,0];      //bets of bau cua","        ","        //music","        $scope.music = [","          {","            name: \"Ngày xuân long phụng sum vầy - Nhiều ca sĩ\",","            //url: \"https://mp3.zing.vn/embed/song/ZWZCUZOF?start=true\"","            url: \"https://zmp3-mp3-s1.zadn.vn/e49aa1acdae833b66af9/9206456321125958483?authen=exp=1517617461~acl=/e49aa1acdae833b66af9/*~hmac=c635a3ba3dbeeea38920eb9f16f487aa\"","          },","          {","            name: \"Một năm mới bình an - Sơn Tùng M-TP\",","            //url: \"https://mp3.zing.vn/embed/song/ZW7O9AI7?start=true\"","            url: \"https://zmp3-mp3-s1.zadn.vn/207f4efbecbf05e15cae/5848145818697956767?authen=exp=1517410081~acl=/207f4efbecbf05e15cae/*~hmac=f137c103baa37dae9cd4b2fd54dcdad9\"","          },","          {","            name: \"Mùa Xuân Ơi - Mây Trắng\",","            //url: \"https://mp3.zing.vn/embed/song/ZWZA908E?start=true\"","            url: \"https://zmp3-mp3-s1.zadn.vn/2a533b20a064493a1075/8915927772504745751?authen=exp=1517399550~acl=/2a533b20a064493a1075/*~hmac=a73062f14bdae65776b14ce586aca5ab\"","          },","          {","            name: \"Xuân đã về - Mai Lệ Quyên , Đường Tuấn Khang\",","            //url: \"https://mp3.zing.vn/embed/song/ZW78FEFI?start=true\"","            url: \"https://zmp3-mp3-s1.zadn.vn/e3703739d97d3023696c/8832838047626498591?authen=exp=1517410510~acl=/e3703739d97d3023696c/*~hmac=fde81693891fafaca9bef5199cb4a068\"","          }","        ];","        $scope.index_song = 0;","        ","        $scope.result_1 = \"http://icons.iconarchive.com/icons/martz90/circle-addon2/512/help-icon.png\";","        $scope.result_2 = \"http://icons.iconarchive.com/icons/martz90/circle-addon2/512/help-icon.png\";","        $scope.result_3 = \"http://icons.iconarchive.com/icons/martz90/circle-addon2/512/help-icon.png\";","","        //socket event","        socket.on('connect', function () {","          console.log(\"connected to server\");","        });","        ","        socket.on('user_change', function(users_info){","          //received whole users_info array from server","          $scope.users_info = users_info;","          $scope.$apply();","        });","        ","        socket.on('tick_time',function(gameinfo){","          $scope.openGame = gameinfo.open_game;","          if (gameinfo.time >= 0){","            $scope.time = gameinfo.time;","            if (gameinfo.open_game){","              $scope.comment = \"Đặt vô đặt vô đê bà con!!!\";","            }","            else","              $scope.comment = \"Ván mới sắp bắt đầu . . .\";","          }","          else{","            if (gameinfo.open_game)","              $scope.comment = \"Chuẩn bị gieo xí ngầu . . .\";","            else","              $scope.comment = \"Ván mới sắp bắt đầu . . .\";","          }","          $scope.$apply();","        });","        ","        socket.on('dice_result', function(diceinfo){","          //set image","          setImage(diceinfo.dice_1, function(url1){","            $scope.result_1 = url1;","          });","          setImage(diceinfo.dice_2, function(url2){","            $scope.result_2 = url2;","          });","          setImage(diceinfo.dice_3, function(url3){","            $scope.result_3 = url3;","          });","          ","          //check the result","          for(var i=0; i<$scope.bets.length; i++){","            //if bet","            if ($scope.bets[i]>0){","              //if bingo","              if (i==diceinfo.dice_1 || i==diceinfo.dice_2 || i==diceinfo.dice_3){","                //take the refund","                $scope.coins += $scope.bets[i];","                socket.emit('log_test', \"bingo\");","                //take the interest","                if (i==diceinfo.dice_1){","                  $scope.coins += $scope.bets[i];","                  socket.emit('log_test', \"at \" + i + \" with coins: \" + $scope.coins);","                }","                if (i==diceinfo.dice_2){","                  $scope.coins += $scope.bets[i];","                  socket.emit('log_test', \"at \" + i + \" with coins: \" + $scope.coins);","                }","                if (i==diceinfo.dice_3){","                  $scope.coins += $scope.bets[i];","                  socket.emit('log_test', \"at \" + i + \" with coins: \" + $scope.coins);","                }","              }","              //reset","              $scope.bets[i] = 0;","            }","          }","          $scope.$apply();","        });","        ","        $scope.begin = 0;","        socket.on('new_message', function(msginfo){","          //push to messages","          $scope.messages.push(msginfo);","          $scope.info = $scope.messages;","          $scope.begin = $scope.messages.length - 3;","          $scope.$apply();","        });","        ","        $scope.setUser = function(){","          //emit to server new user","          socket.emit('new_user', {","            name: $scope.name, ","            coins: $scope.coins,","            socket_id: socket.id","          });","        };","        ","        $scope.sendMessage = function(){","          //emit message to server","          socket.emit('new_message', {","            name: $scope.name,","            message: $scope.message","          });","          $scope.message = \"\";","        };","        ","        $scope.increaseBet = function(index){","          //check","          if ($scope.coins - 2 >= 0){","            $scope.bets[index] += 2;","            $scope.coins -= 2;","            $scope.$apply();","          }","        };","        ","        $scope.decreaseBet = function(index){","          if ($scope.bets[index] - 2 >= 0){","            $scope.bets[index] -= 2;","            $scope.coins += 2;","            $scope.$apply();","          }","        };","        ","        $scope.selectMusic = function(index){","          $scope.index_song = index;","          $scope.info = index;","          $scope.$apply();","        };","        ","        function setImage(num, callback){","          switch (num) {","            case 0:","              callback(\"http://chiase123.com/bau-cua-tom-ca/img/ga.png\");","              break;","            case 1:","              callback(\"http://chiase123.com/bau-cua-tom-ca/img/cua.png\");","              break;","            case 2:","              callback(\"http://chiase123.com/bau-cua-tom-ca/img/nai.png\");","              break;","            case 3:","              callback(\"http://chiase123.com/bau-cua-tom-ca/img/tom.png\");","              break;","            case 4:","              callback(\"http://chiase123.com/bau-cua-tom-ca/img/bau.png\");","              break;","            case 5:","              callback(\"http://chiase123.com/bau-cua-tom-ca/img/ca.png\");","              break;","          }","        }","        ","        var audio = document.getElementById(\"music_player\");","        audio.onended = function(){","          if ($scope.index_song == $scope.music.length - 1)","            $scope.index_song = 0;","          else","            $scope.index_song++;","        };","        ","      }","      ","      ","    </script>","    ","    <script>","    $(document).ready(function(){","      $(\"#myModal\").modal();","    });","    </script>","","  </head>","  <body>","    <div class=\"container\" ng-controller=\"ChatController\">","     ","      <!-- Modal -->","      <div class=\"modal fade\" id=\"myModal\" role=\"dialog\" ng-show=\"showModal\">","        <div class=\"modal-dialog\">","        ","          <!-- Modal content-->","          <div class=\"modal-content text-center\">","            <div class=\"modal-header\">","              <h4 class=\"modal-title\">BẦU CUA ONLINE (Thử nghiệm)</h4>","            </div>","            <div class=\"modal-body\">","              <form role=\"form\">","                <div class=\"form-group\">","                  <h4>Xin cái tên rồi vào sòng nào</h4>","                  <input type=\"text\" class=\"form-control\" id=\"usrname\" ng-model=\"name\">","                </div>","                ","                <button type=\"submit\" class=\"btn btn-default btn-success btn-block\" data-dismiss=\"modal\" ng-click=\"setUser()\"> Quất thôi!!!</button>","              </form>","            </div>","          </div>","        </div>","      </div>","      ","      ","      <!--Web-->","      <nav class=\"navbar navbar-inverse\">","      <div class=\"container-fluid\">","        <div class=\"navbar-header\">","          <button type=\"button\" class=\"navbar-toggle\" data-toggle=\"collapse\" data-target=\"#myNavbar\">","            <span class=\"icon-bar\"></span>","            <span class=\"icon-bar\"></span>","            <span class=\"icon-bar\"></span>                        ","          </button>","          <h3> <font color=\"white\">BẦU CUA ONLINE (Bản thử nghiệm)</font> </h3>","        </div>","        <div class=\"collapse navbar-collapse\" id=\"myNavbar\">","          ","          <ul class=\"nav navbar-nav navbar-right\">","            <li><a href=\"#\"> Giới thiệu </a></li>","          </ul>","        </div>","      </div>","    </nav>","      ","    <div class=\"container-fluid text-center\">    ","      <div class=\"row content\">","        ","        <div class=\"col-sm-8 text-left\"> ","        ","          <h1>Thông tin</h3>","          <h3><span class=\"glyphicon glyphicon-user\"></span> {{name}} </h3>","          <h3><span class=\"glyphicon glyphicon-usd\"></span> Số tiền hiện có: <span class=\"label label-info\">{{coins}}</<span></h3> ","          <h3><span class=\"glyphicon glyphicon-globe\"></span> Tổng số người chơi: <span class=\"label label-info\">{{users_info.length}}</span></h3>","  ","          <hr>","         ","          <h1>Luật chơi</h1>","           <ul>","              <li>Khi bắt đầu nhận được 10 đồng</li>","              <li>Máy làm cái, mỗi ván có thời gian 60s, mỗi lượt bạn có 30s để đặt bầu cua</li>","              <li>Đơn vị mỗi lần đặt là 2 đồng</li>","              <li>Trò chơi chỉ mang tính chất giải trí</li>","              <li>Đang cập nhật . . .</li>","            </ul>","          <hr>","          ","         ","          ","          <h1>Bàn bầu cua</h1>","          ","          <!--ban bau cua-->","          <div class=\"row\">","            <div class=\"col-sm-4 text-center\">","              <div class=\"row\">","                <img class=\"img-thumbnail banbaucua\" src=\"http://chiase123.com/bau-cua-tom-ca/img/ga.png\" alt=\"ga\">","              </div>","              <div class=\"row\">","                <button type=\"button\" class=\"btn btn-danger\" ng-click=\"decreaseBet(0)\">-</button>","                <span class=\"label label-info\">{{bets[0]}}</span>","                <button type=\"button\" class=\"btn btn-success\" ng-click=\"increaseBet(0)\">+</button>","              </div>","            </div>","            ","             <div class=\"col-sm-4  text-center\">","              <div class=\"row\">","                <img class=\"img-thumbnail banbaucua\" src=\"http://chiase123.com/bau-cua-tom-ca/img/cua.png\" alt=\"cua\">","              </div>","              <div class=\"row\">","                <button type=\"button\" class=\"btn btn-danger\" ng-click=\"decreaseBet(1)\">-</button>","                <span class=\"label label-info\">{{bets[1]}}</span>","                <button type=\"button\" class=\"btn btn-success\" ng-click=\"increaseBet(1)\">+</button>","              </div>","            </div>","             <div class=\"col-sm-4 text-center\">","              <div class=\"row\">","                <img class=\"img-thumbnail banbaucua\" src=\"http://chiase123.com/bau-cua-tom-ca/img/nai.png\" alt=\"nai\">","              </div>","              <div class=\"row\">","                <button type=\"button\" class=\"btn btn-danger\" ng-click=\"decreaseBet(2)\">-</button>","                <span class=\"label label-info\">{{bets[2]}}</span>","                <button type=\"button\" class=\"btn btn-success\" ng-click=\"increaseBet(2)\">+</button>","              </div>","            </div>","          </div>","          ","           <div class=\"row\">","            <div class=\"col-sm-4 text-center\">","              <div class=\"row\">","                <img class=\"img-thumbnail banbaucua\" src=\"http://chiase123.com/bau-cua-tom-ca/img/tom.png\" alt=\"tom\">","              </div>","              <div class=\"row\">","                <button type=\"button\" class=\"btn btn-danger\" ng-click=\"decreaseBet(3)\">-</button>","                <span class=\"label label-info\">{{bets[3]}}</span>","                <button type=\"button\" class=\"btn btn-success\" ng-click=\"increaseBet(3)\">+</button>","              </div>","            </div>","             <div class=\"col-sm-4 text-center\">","             <div class=\"row\">","                <img class=\"img-thumbnail banbaucua\" src=\"http://chiase123.com/bau-cua-tom-ca/img/bau.png\" alt=\"bau\">","              </div>","              <div class=\"row\">","                <button type=\"button\" class=\"btn btn-danger\" ng-click=\"decreaseBet(4)\">-</button>","                <span class=\"label label-info\">{{bets[4]}}</span>","                <button type=\"button\" class=\"btn btn-success\" ng-click=\"increaseBet(4)\">+</button>","              </div>","            </div>","             <div class=\"col-sm-4 text-center\">","              <div class=\"row\">","                <img class=\"img-thumbnail banbaucua\" src=\"http://chiase123.com/bau-cua-tom-ca/img/ca.png\" alt=\"ca\">","              </div>","              <div class=\"row\">","                <button type=\"button\" class=\"btn btn-danger\" ng-click=\"decreaseBet(5)\">-</button>","                <span class=\"label label-info\">{{bets[5]}}</span>","                <button type=\"button\" class=\"btn btn-success\" ng-click=\"increaseBet(5)\">+</button>","              </div>","            </div>","          </div>","     ","    ","        </div>","        <div class=\"col-sm-4 sidenav\">","         <h1>{{time}}</h1>","         <h3> <span class=\"label label-success\" ng-show=\"openGame\"> SÒNG ĐANG MỞ</span> </h3>","         <h3> <span class=\"label label-danger\" ng-show=\"!openGame\"> SÒNG ĐÃ ĐÓNG</span> </h3> <br>","         <h3> {{comment}} </h3> <hr>","            <div class=\"result\">","               <h3> KẾT QUẢ GIEO XÍ NGẦU</h3>","              <div class=\"col-sm-4\">","                <img class=\"img-thumbnail\" ng-src=\"{{result_1}}\">","              </div>","              <div class=\"col-sm-4\">","                <img class=\"img-thumbnail\" ng-src=\"{{result_2}}\">","              </div>","              <div class=\"col-sm-4\">","                <img class=\"img-thumbnail\" ng-src=\"{{result_3}}\">","                <br> <hr>","              </div>","            </div>","            ","            <div class=\"online\">","              <h3>THÀNH VIÊN</h3>","               <table class=\"table online\">","                <thead>","                  <tr>","                    <th>Nickname</th>","                    <th>Số tiền hiện có</th>","                  </tr>","                </thead>","                <tbody>","                  <tr ng-repeat=\"userinfo in users_info\">","                    <td ng-bind=\"userinfo.name\"></td>","                    <td ng-bind=\"userinfo.coins\"></td>","                  </tr>","                </tbody>","              </table>","            </div>","            ","            <div class=\"chat\">","              <hr>","              <h3>TRÒ CHUYỆN</h3>","              <div class=\"panel panel-default text-left\" height=300>","                <div class=\"panel-heading\" >Chat Message</div>","                <div class=\"panel-body\">","                  <ul class=\"list_message\">","                    <li ng-repeat=\"msg in messages\">","                      <b>{{msg.name}}</b>: {{msg.message}}","                    </li>","                  </ul>","                </div>","                <div class=\"panel-footer\">","                  <form ng-submit=\"sendMessage()\">","                    <input type=\"text\" class=\"form-control\" ng-submit=\"sendMessage()\" ng-model=\"message\" placeholder=\"Nhập nội dung tin nhắn . . .\"/>","                  </form>","                </div>","              </div>","            </div>","            ","            <div class=\"music\">","              <hr>","              <h3>MUSIC</h3>","              <audio id=\"music_player\" ng-src=\"{{music[index_song].url}}\" controls autoplay></audio>","              <div class=\"dropdown\">","                <button class=\"btn btn-primary dropdown-toggle\" type=\"button\" data-toggle=\"dropdown\">{{music[index_song].name}}","                <span class=\"caret\"></span></button>","                <ul class=\"dropdown-menu\">","                  <li><a ng-repeat=\"m in music\" ng-click=\"selectMusic($index)\">{{m.name}}</a></li>","                </ul>","              </div>","            </div>","        </div>","        ","      </div>"," ","    </div>","    ","    <footer class=\"container-fluid text-center\">","      <p> BẦU CUA ONLINE (phiên bản thử nghiệm) </p>","      <p>Copyright © 2018, Developed by <a target=\"_blank\" href=\"https://www.facebook.com/profile.php?id=100010191373475\">Quan Tran Minh</a></p>","    </footer>","      ","    </div>","  </body>","</html>",""],"id":1}],[{"start":{"row":3,"column":12},"end":{"row":3,"column":25},"action":"remove","lines":["ẦU CUA ONLINE"],"id":2}],[{"start":{"row":3,"column":11},"end":{"row":3,"column":12},"action":"remove","lines":["B"],"id":3}],[{"start":{"row":3,"column":11},"end":{"row":3,"column":12},"action":"insert","lines":["B"],"id":4}],[{"start":{"row":3,"column":12},"end":{"row":3,"column":13},"action":"insert","lines":["A"],"id":5}],[{"start":{"row":3,"column":12},"end":{"row":3,"column":13},"action":"remove","lines":["A"],"id":6},{"start":{"row":3,"column":12},"end":{"row":3,"column":13},"action":"insert","lines":["Á"]}],[{"start":{"row":3,"column":13},"end":{"row":3,"column":14},"action":"insert","lines":["O"],"id":7}],[{"start":{"row":3,"column":14},"end":{"row":3,"column":15},"action":"insert","lines":[" "],"id":8}],[{"start":{"row":3,"column":15},"end":{"row":3,"column":16},"action":"insert","lines":["L"],"id":9}],[{"start":{"row":3,"column":16},"end":{"row":3,"column":17},"action":"insert","lines":["O"],"id":10}],[{"start":{"row":3,"column":16},"end":{"row":3,"column":17},"action":"remove","lines":["O"],"id":11},{"start":{"row":3,"column":16},"end":{"row":3,"column":17},"action":"insert","lines":["Ô"]}],[{"start":{"row":3,"column":16},"end":{"row":3,"column":17},"action":"remove","lines":["Ô"],"id":12},{"start":{"row":3,"column":16},"end":{"row":3,"column":17},"action":"insert","lines":["Ỗ"]}],[{"start":{"row":3,"column":17},"end":{"row":3,"column":18},"action":"insert","lines":["I"],"id":13}],[{"start":{"row":3,"column":17},"end":{"row":3,"column":18},"action":"remove","lines":["I"],"id":14}],[{"start":{"row":3,"column":16},"end":{"row":3,"column":17},"action":"remove","lines":["Ỗ"],"id":15}],[{"start":{"row":3,"column":15},"end":{"row":3,"column":16},"action":"remove","lines":["L"],"id":16}],[{"start":{"row":3,"column":14},"end":{"row":3,"column":15},"action":"remove","lines":[" "],"id":17}],[{"start":{"row":3,"column":13},"end":{"row":3,"column":14},"action":"remove","lines":["O"],"id":18}],[{"start":{"row":3,"column":12},"end":{"row":3,"column":13},"action":"remove","lines":["Á"],"id":19}],[{"start":{"row":3,"column":11},"end":{"row":3,"column":12},"action":"remove","lines":["B"],"id":20}],[{"start":{"row":3,"column":11},"end":{"row":3,"column":12},"action":"insert","lines":["B"],"id":21}],[{"start":{"row":3,"column":12},"end":{"row":3,"column":13},"action":"insert","lines":["A"],"id":22}],[{"start":{"row":3,"column":12},"end":{"row":3,"column":13},"action":"remove","lines":["A"],"id":23},{"start":{"row":3,"column":12},"end":{"row":3,"column":13},"action":"insert","lines":["Â"]}],[{"start":{"row":3,"column":12},"end":{"row":3,"column":13},"action":"remove","lines":["Â"],"id":24},{"start":{"row":3,"column":12},"end":{"row":3,"column":13},"action":"insert","lines":["Ầ"]}],[{"start":{"row":3,"column":13},"end":{"row":3,"column":14},"action":"insert","lines":["U"],"id":25}],[{"start":{"row":3,"column":14},"end":{"row":3,"column":15},"action":"insert","lines":[" "],"id":26}],[{"start":{"row":3,"column":15},"end":{"row":3,"column":16},"action":"insert","lines":["C"],"id":27}],[{"start":{"row":3,"column":16},"end":{"row":3,"column":17},"action":"insert","lines":["U"],"id":28}],[{"start":{"row":3,"column":17},"end":{"row":3,"column":18},"action":"insert","lines":["A"],"id":29}],[{"start":{"row":3,"column":18},"end":{"row":3,"column":19},"action":"insert","lines":[" "],"id":30}],[{"start":{"row":3,"column":19},"end":{"row":3,"column":20},"action":"insert","lines":["O"],"id":31}],[{"start":{"row":3,"column":20},"end":{"row":3,"column":21},"action":"insert","lines":["N"],"id":32}],[{"start":{"row":3,"column":21},"end":{"row":3,"column":22},"action":"insert","lines":["L"],"id":33}],[{"start":{"row":3,"column":22},"end":{"row":3,"column":23},"action":"insert","lines":["I"],"id":34}],[{"start":{"row":3,"column":23},"end":{"row":3,"column":24},"action":"insert","lines":["N"],"id":35}],[{"start":{"row":3,"column":24},"end":{"row":3,"column":25},"action":"insert","lines":["E"],"id":36}],[{"start":{"row":3,"column":25},"end":{"row":3,"column":26},"action":"insert","lines":[" "],"id":37}],[{"start":{"row":3,"column":26},"end":{"row":3,"column":27},"action":"insert","lines":["="],"id":38}],[{"start":{"row":3,"column":27},"end":{"row":3,"column":28},"action":"insert","lines":[" "],"id":39}],[{"start":{"row":3,"column":27},"end":{"row":3,"column":28},"action":"remove","lines":[" "],"id":40}],[{"start":{"row":3,"column":26},"end":{"row":3,"column":27},"action":"remove","lines":["="],"id":41}],[{"start":{"row":3,"column":26},"end":{"row":3,"column":27},"action":"insert","lines":["-"],"id":42}],[{"start":{"row":3,"column":27},"end":{"row":3,"column":28},"action":"insert","lines":[" "],"id":43}],[{"start":{"row":3,"column":28},"end":{"row":3,"column":29},"action":"insert","lines":["B"],"id":44}],[{"start":{"row":3,"column":29},"end":{"row":3,"column":30},"action":"insert","lines":["A"],"id":45}],[{"start":{"row":3,"column":29},"end":{"row":3,"column":30},"action":"remove","lines":["A"],"id":46},{"start":{"row":3,"column":29},"end":{"row":3,"column":30},"action":"insert","lines":["Á"]}],[{"start":{"row":3,"column":30},"end":{"row":3,"column":31},"action":"insert","lines":["O"],"id":47}],[{"start":{"row":3,"column":31},"end":{"row":3,"column":32},"action":"insert","lines":[" "],"id":48}],[{"start":{"row":3,"column":32},"end":{"row":3,"column":33},"action":"insert","lines":["L"],"id":49}],[{"start":{"row":3,"column":33},"end":{"row":3,"column":34},"action":"insert","lines":["O"],"id":50}],[{"start":{"row":3,"column":33},"end":{"row":3,"column":34},"action":"remove","lines":["O"],"id":51},{"start":{"row":3,"column":33},"end":{"row":3,"column":34},"action":"insert","lines":["Ô"]}],[{"start":{"row":3,"column":33},"end":{"row":3,"column":34},"action":"remove","lines":["Ô"],"id":52},{"start":{"row":3,"column":33},"end":{"row":3,"column":34},"action":"insert","lines":["Ỗ"]}],[{"start":{"row":3,"column":34},"end":{"row":3,"column":35},"action":"insert","lines":["I"],"id":53}],[{"start":{"row":3,"column":34},"end":{"row":3,"column":35},"action":"remove","lines":["I"],"id":54}],[{"start":{"row":3,"column":33},"end":{"row":3,"column":34},"action":"remove","lines":["Ỗ"],"id":55}],[{"start":{"row":3,"column":33},"end":{"row":3,"column":34},"action":"insert","lines":["O"],"id":56}],[{"start":{"row":3,"column":33},"end":{"row":3,"column":34},"action":"remove","lines":["O"],"id":57},{"start":{"row":3,"column":33},"end":{"row":3,"column":34},"action":"insert","lines":["Ô"]}],[{"start":{"row":3,"column":33},"end":{"row":3,"column":34},"action":"remove","lines":["Ô"],"id":58},{"start":{"row":3,"column":33},"end":{"row":3,"column":34},"action":"insert","lines":["Ỗ"]}],[{"start":{"row":3,"column":34},"end":{"row":3,"column":35},"action":"insert","lines":["I"],"id":59}],[{"start":{"row":88,"column":5},"end":{"row":98,"column":8},"action":"remove","lines":["   //init","        $scope.messages = [];","        $scope.roster = [];","        $scope.users_info = []; //contains all users in game","        $scope.name = \"\";       //name of user","        $scope.coins = 10;      //current money","        $scope.text = '';","        $scope.openGame = false;","        $scope.time = 0;        //time of game","        $scope.bets = [0,0,0,0,0,0];      //bets of bau cua","        "],"id":60}],[{"start":{"row":88,"column":4},"end":{"row":88,"column":5},"action":"remove","lines":[" "],"id":61}],[{"start":{"row":88,"column":0},"end":{"row":88,"column":4},"action":"remove","lines":["    "],"id":62}],[{"start":{"row":87,"column":0},"end":{"row":88,"column":0},"action":"remove","lines":["",""],"id":63}],[{"start":{"row":86,"column":34},"end":{"row":87,"column":0},"action":"remove","lines":["",""],"id":64}],[{"start":{"row":86,"column":34},"end":{"row":87,"column":0},"action":"insert","lines":["",""],"id":65},{"start":{"row":87,"column":0},"end":{"row":87,"column":8},"action":"insert","lines":["        "]}],[{"start":{"row":113,"column":5},"end":{"row":116,"column":0},"action":"remove","lines":["   $scope.result_1 = \"http://icons.iconarchive.com/icons/martz90/circle-addon2/512/help-icon.png\";","        $scope.result_2 = \"http://icons.iconarchive.com/icons/martz90/circle-addon2/512/help-icon.png\";","        $scope.result_3 = \"http://icons.iconarchive.com/icons/martz90/circle-addon2/512/help-icon.png\";",""],"id":66}],[{"start":{"row":119,"column":5},"end":{"row":228,"column":10},"action":"remove","lines":["   socket.on('user_change', function(users_info){","          //received whole users_info array from server","          $scope.users_info = users_info;","          $scope.$apply();","        });","        ","        socket.on('tick_time',function(gameinfo){","          $scope.openGame = gameinfo.open_game;","          if (gameinfo.time >= 0){","            $scope.time = gameinfo.time;","            if (gameinfo.open_game){","              $scope.comment = \"Đặt vô đặt vô đê bà con!!!\";","            }","            else","              $scope.comment = \"Ván mới sắp bắt đầu . . .\";","          }","          else{","            if (gameinfo.open_game)","              $scope.comment = \"Chuẩn bị gieo xí ngầu . . .\";","            else","              $scope.comment = \"Ván mới sắp bắt đầu . . .\";","          }","          $scope.$apply();","        });","        ","        socket.on('dice_result', function(diceinfo){","          //set image","          setImage(diceinfo.dice_1, function(url1){","            $scope.result_1 = url1;","          });","          setImage(diceinfo.dice_2, function(url2){","            $scope.result_2 = url2;","          });","          setImage(diceinfo.dice_3, function(url3){","            $scope.result_3 = url3;","          });","          ","          //check the result","          for(var i=0; i<$scope.bets.length; i++){","            //if bet","            if ($scope.bets[i]>0){","              //if bingo","              if (i==diceinfo.dice_1 || i==diceinfo.dice_2 || i==diceinfo.dice_3){","                //take the refund","                $scope.coins += $scope.bets[i];","                socket.emit('log_test', \"bingo\");","                //take the interest","                if (i==diceinfo.dice_1){","                  $scope.coins += $scope.bets[i];","                  socket.emit('log_test', \"at \" + i + \" with coins: \" + $scope.coins);","                }","                if (i==diceinfo.dice_2){","                  $scope.coins += $scope.bets[i];","                  socket.emit('log_test', \"at \" + i + \" with coins: \" + $scope.coins);","                }","                if (i==diceinfo.dice_3){","                  $scope.coins += $scope.bets[i];","                  socket.emit('log_test', \"at \" + i + \" with coins: \" + $scope.coins);","                }","              }","              //reset","              $scope.bets[i] = 0;","            }","          }","          $scope.$apply();","        });","        ","        $scope.begin = 0;","        socket.on('new_message', function(msginfo){","          //push to messages","          $scope.messages.push(msginfo);","          $scope.info = $scope.messages;","          $scope.begin = $scope.messages.length - 3;","          $scope.$apply();","        });","        ","        $scope.setUser = function(){","          //emit to server new user","          socket.emit('new_user', {","            name: $scope.name, ","            coins: $scope.coins,","            socket_id: socket.id","          });","        };","        ","        $scope.sendMessage = function(){","          //emit message to server","          socket.emit('new_message', {","            name: $scope.name,","            message: $scope.message","          });","          $scope.message = \"\";","        };","        ","        $scope.increaseBet = function(index){","          //check","          if ($scope.coins - 2 >= 0){","            $scope.bets[index] += 2;","            $scope.coins -= 2;","            $scope.$apply();","          }","        };","        ","        $scope.decreaseBet = function(index){","          if ($scope.bets[index] - 2 >= 0){","            $scope.bets[index] -= 2;","            $scope.coins += 2;","            $scope.$apply();","          }","        };"],"id":67}],[{"start":{"row":119,"column":4},"end":{"row":119,"column":5},"action":"remove","lines":[" "],"id":68}],[{"start":{"row":119,"column":0},"end":{"row":119,"column":4},"action":"remove","lines":["    "],"id":69}],[{"start":{"row":118,"column":8},"end":{"row":119,"column":0},"action":"remove","lines":["",""],"id":70}],[{"start":{"row":118,"column":4},"end":{"row":118,"column":8},"action":"remove","lines":["    "],"id":71}],[{"start":{"row":118,"column":0},"end":{"row":118,"column":4},"action":"remove","lines":["    "],"id":72}],[{"start":{"row":117,"column":11},"end":{"row":118,"column":0},"action":"remove","lines":["",""],"id":73}],[{"start":{"row":125,"column":8},"end":{"row":146,"column":9},"action":"remove","lines":["function setImage(num, callback){","          switch (num) {","            case 0:","              callback(\"http://chiase123.com/bau-cua-tom-ca/img/ga.png\");","              break;","            case 1:","              callback(\"http://chiase123.com/bau-cua-tom-ca/img/cua.png\");","              break;","            case 2:","              callback(\"http://chiase123.com/bau-cua-tom-ca/img/nai.png\");","              break;","            case 3:","              callback(\"http://chiase123.com/bau-cua-tom-ca/img/tom.png\");","              break;","            case 4:","              callback(\"http://chiase123.com/bau-cua-tom-ca/img/bau.png\");","              break;","            case 5:","              callback(\"http://chiase123.com/bau-cua-tom-ca/img/ca.png\");","              break;","          }","        }"],"id":74}],[{"start":{"row":125,"column":0},"end":{"row":125,"column":2},"action":"remove","lines":["  "],"id":75}],[{"start":{"row":124,"column":8},"end":{"row":125,"column":6},"action":"remove","lines":["","      "],"id":76}],[{"start":{"row":124,"column":4},"end":{"row":124,"column":8},"action":"remove","lines":["    "],"id":77}],[{"start":{"row":124,"column":0},"end":{"row":124,"column":4},"action":"remove","lines":["    "],"id":78}],[{"start":{"row":123,"column":10},"end":{"row":124,"column":0},"action":"remove","lines":["",""],"id":79}],[{"start":{"row":138,"column":3},"end":{"row":143,"column":0},"action":"remove","lines":[" <script>","    $(document).ready(function(){","      $(\"#myModal\").modal();","    });","    </script>",""],"id":80}],[{"start":{"row":138,"column":2},"end":{"row":138,"column":3},"action":"remove","lines":[" "],"id":81}],[{"start":{"row":138,"column":1},"end":{"row":138,"column":2},"action":"remove","lines":[" "],"id":82}],[{"start":{"row":138,"column":0},"end":{"row":138,"column":1},"action":"remove","lines":[" "],"id":83}],[{"start":{"row":137,"column":4},"end":{"row":138,"column":0},"action":"remove","lines":["",""],"id":84}],[{"start":{"row":142,"column":5},"end":{"row":165,"column":6},"action":"remove","lines":[" <!-- Modal -->","      <div class=\"modal fade\" id=\"myModal\" role=\"dialog\" ng-show=\"showModal\">","        <div class=\"modal-dialog\">","        ","          <!-- Modal content-->","          <div class=\"modal-content text-center\">","            <div class=\"modal-header\">","              <h4 class=\"modal-title\">BẦU CUA ONLINE (Thử nghiệm)</h4>","            </div>","            <div class=\"modal-body\">","              <form role=\"form\">","                <div class=\"form-group\">","                  <h4>Xin cái tên rồi vào sòng nào</h4>","                  <input type=\"text\" class=\"form-control\" id=\"usrname\" ng-model=\"name\">","                </div>","                ","                <button type=\"submit\" class=\"btn btn-default btn-success btn-block\" data-dismiss=\"modal\" ng-click=\"setUser()\"> Quất thôi!!!</button>","              </form>","            </div>","          </div>","        </div>","      </div>","      ","      "],"id":85}],[{"start":{"row":142,"column":4},"end":{"row":142,"column":5},"action":"remove","lines":[" "],"id":86}],[{"start":{"row":142,"column":0},"end":{"row":142,"column":4},"action":"remove","lines":["    "],"id":87}],[{"start":{"row":141,"column":5},"end":{"row":142,"column":0},"action":"remove","lines":["",""],"id":88}],[{"start":{"row":141,"column":4},"end":{"row":141,"column":5},"action":"remove","lines":[" "],"id":89}],[{"start":{"row":141,"column":0},"end":{"row":141,"column":4},"action":"remove","lines":["    "],"id":90}],[{"start":{"row":140,"column":58},"end":{"row":141,"column":0},"action":"remove","lines":["",""],"id":91}],[{"start":{"row":140,"column":57},"end":{"row":140,"column":58},"action":"remove","lines":[">"],"id":92}]]},"ace":{"folds":[],"scrolltop":2086,"scrollleft":0,"selection":{"start":{"row":164,"column":41},"end":{"row":164,"column":41},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":148,"state":"start","mode":"ace/mode/html"}},"timestamp":1517582231981,"hash":"985378ae99a3c3d9b0689614793d0e9571d94300"}